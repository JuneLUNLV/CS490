<!doctype html>
<html>

    <head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>UNLV Faculty Mentoring Information Look Up</title>
		<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/util.css')}}">
		<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/main.css')}}">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">    
    
		
		<style>
      table thead tr{
        background: #55b164;
      }
      
      .dropdown-content {
        top: 100% !important;
      }      
      
      #floatButtonDiv{
				position: fixed;
				right: 3vw;
				bottom: 5vh;
				padding-top: 15px;
				margin-bottom: 0;
				z-index: 997;
			
			}
			
			#floatButtonA{
			    width: 3rem;
				height: 3rem;
				line-height: 32.4px;
				transition: all .3s ease-in-out;
			
			}
			
			#floatButtonI{
				line-height: 3.1rem;
				font-size: 2.3rem;
			}
			
			#floatButtonDiv:hover #floatButtonA {
				transform:scale(1.5);
			}			

			.tooltiptext {
				visibility: hidden;
				background-color: black;
				color: #fff;
				text-align: center;
				padding: 1px 0;
				border-radius: 6px;
				position: absolute;
				z-index: 1;
				font-size: 70%;
				width: 10vw;
				left: -3.3vw;
				top: -3vh;
			}
			
			#floatButtonDiv:hover .tooltiptext {
			  visibility: visible;
			  transition-delay: 0.3s;
			}		


      .my_action{
			  position: relative;
			  margin-left: 0.625rem;
			  padding: 0.625rem 1.25rem;
			  border: none;
			  background-color: #fd6262;
			  border-radius: 0.25rem;
			  color: white;
			  font-size: 1rem;
			  font-weight: 300;
			  overflow: hidden;
			  z-index: 1;
			  font-family: sans-serif;  
        background-color: #2ecc71;        
      }
      
      .my_action:before{
      	position: absolute;
			  content: '';
			  top: 0;
			  left: 0;
			  width: 0%;
			  height: 100%;
			  background-color: rgba(255, 255, 255, 0.2);
			  transition: width 0.25s;
			  z-index: 0;
      }
      
      .my_action:hover:before{
        width: 100%;
      }
      
      #filterDiv{
        display: inline-flex;
        width: 80%;
        margin-top: 1%;
        margin-left: 10%;   
      }
      
      .my_flexdatalist{       
        border-radius: 0px;
        background-color: rgba(0, 0, 0, 0);
        display: block;
        width: 50%;
        height: 30%;
        padding: 10px 15px;
        font-size: 15px;
        line-height: 1.42857143;
        color: #2c3e50;
        background-color: #ffffff;
        background-image: none;
        border: 1px solid #000000;   !important   
        border-radius: 4px;
        margin-right: 18px;
      }
        
      .item-count{
          position:absolute;
          left:10%;	
      }
      
      .my_action:focus{
        background-color: #2ecc71;
      }
      
      
		</style>
		
    </head>



	<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
	<link rel= "stylesheet" type= "text/css" href= "{{url_for('static',filename='jquery.flexdatalist.min.css') }}">
	<script src="{{url_for('static', filename='jquery.flexdatalist.min.js')}}"></script>  
  <ul id="dropdown1" class="dropdown-content">
    <li class="divider"></li>
    <li><a href="#!">Log Out</a></li>
  </ul>

  <nav>
    <div class="nav-wrapper" style="background-color: #2b97d6;">
      <a onclick='window.location.href = "/"' style="margin-left: 20px;margin-right: 40px;position:relative" class="brand-logo left">HOME</a>
      <ul id="nav-mobile" class="left hide-on-med-and-down">
        <li><a onclick='window.location.href = "/main_menu"'>Individual Assign</a></li>
        <li><a>Mass Assign</a></li>
        <li><a style="background-color: rgba(0,0,0,0.19);">Table</a></li>
        <li><a onclick='window.location.href = "/backup_database"'>Backup Database</a></li>
         <li><a style = "position: absolute;right: 0px; margin-right: 20px;" class="dropdown-trigger" href="#!" data-target="dropdown1">John<i class="material-icons right">arrow_drop_down</i></a></li>
      </ul>
    </div>
  </nav>   
  
 <div id="filterDiv">
  <input type='text'
         placeholder='Filter table by mentor(s)'
         class='flexdatalist'
         data-search-in='professorName'
         data-visible-properties='["professorName","count"]'
         data-selection-required='true'
         data-value-property='id'
         data-text-property='{professorName}, {count}'
         data-min-length='0'
         multiple='multiple'
         name='country_id_multiple'>
  <button class="my_action">Filter Table</button>
</div>
       
		<div class="limiter" >
				<div class="wrap-table100">
					<div class="table100">
					{% for table in mentoring_joined_tables %}
						{{ table|safe }}
					{% endfor %}
					</div>
				</div>
		</div>
		
 		<!-------------------- floating button for redirecting to table page ----------------------------------->
	
		<div class="fixed-action-btn" id="floatButtonDiv">
			<a class="btn-floating btn-small blue" id="floatButtonA" onclick='backToTop()'><i id="floatButtonI" class="large material-icons">vertical_align_top</i></a>
		</div>

		<!-------------------- end floating button for redirecting to table page ----------------------------------->   
    

		<script>
			document.addEventListener('DOMContentLoaded', function() {
				var elems = document.querySelectorAll('.fixed-action-btn');
				var instances = M.FloatingActionButton.init(elems, {
				});
			});

		</script>
		
	</body>
	
	<script>
		studentName = '{{studentName}}';
		studentMail = '{{email}}';
		
		let tdArray = $('td');
		let elemParent = "";
		if(studentName.length > 0){
			for(let i = 0; i < tdArray.length; i++)
			{
				if(tdArray[i].textContent.includes(studentName)){			
					if(studentMail.length > 0){
						if(tdArray[i].parentElement.childNodes[5].textContent.includes(studentMail)){
							elemParent = tdArray[i].parentElement;
							let style = elemParent.style;
							elemParent.scrollIntoView({ block: 'center' });	
							elemParent.style.backgroundColor = "#F55777"
							elemParent.style.color = "#ffffff"
							
							
							setTimeout(function() {
								elemParent.style = style // change it back after ...
							}, 8000); // waiting one second
							break;
						}
					}
					
					
					else{
						let elemParent = tdArray[i].parentElement;
						let style = elemParent.style;
						elemParent.scrollIntoView({ block: 'center' });	
						elemParent.style.backgroundColor = "#F55777"
						elemParent.style.color = "#ffffff"
							
						setTimeout(function() {
							elemParent.style = style // change it back after ...
						}, 8000); // waiting one second
						break;						
					}
				}
			}
		}
    
    function backToTop(){
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
    
  //nav bar drop down
    $(".dropdown-trigger").dropdown();    
    
    function decodeHtml(str) {
      return str.replace(/&#(\d+);/g, function(match, dec) {
        return String.fromCharCode(dec);
      });
    }
  
    let jsonData = decodeHtml('{{professorJson}}');
    $('.flexdatalist').flexdatalist({
       minLength: 1,
       valueProperty: '*',
       selectionRequired: true,
       visibleProperties: ["professorName","count"],
       searchIn: 'professorName',
       data: JSON.parse(jsonData)
    });
    $('ul.flexdatalist-multiple.flex0').css("borderWidth","1.3px")
    $('ul.flexdatalist-multiple.flex0').css("borderRadius","5px")
    $('ul.flexdatalist-multiple.flex0').css("borderStyle","solid")
    $('ul.flexdatalist-multiple.flex0').css("borderColor","black")
    $('ul.flexdatalist-multiple.flex0').css("width","95%")
    $('ul.flexdatalist-multiple.flex0').css("margin-right","7px")
    $('ul.flexdatalist-multiple.flex0').css("padding-top","5px")
    
	</script>

	
</html>

